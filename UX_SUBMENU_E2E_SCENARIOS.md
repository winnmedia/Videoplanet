# VideoPlanet 서브메뉴 E2E 테스트 시나리오

## Feature: 서브메뉴 기본 동작

### Background:
```gherkin
Given 사용자가 VideoPlanet에 로그인되어 있음
And 대시보드 페이지에 있음
And 메인 사이드바가 표시되어 있음
```

### Scenario: 서브메뉴 열기 - 프로젝트 관리
```gherkin
Given 프로젝트가 3개 등록되어 있음
When 사용자가 "프로젝트 관리" 메뉴를 클릭
Then 서브메뉴가 300ms 이내에 열려야 함
And 서브메뉴 제목이 "프로젝트 관리"로 표시되어야 함
And 3개의 프로젝트가 목록에 표시되어야 함
And 첫 번째 프로젝트 항목으로 포커스가 이동해야 함
And 스크린 리더가 "프로젝트 관리 서브메뉴 열림, 3개 항목"을 알려야 함
```

### Scenario: 서브메뉴 열기 - 빈 상태
```gherkin
Given 등록된 프로젝트가 없음
When 사용자가 "프로젝트 관리" 메뉴를 클릭
Then 서브메뉴가 열려야 함
And "등록된 프로젝트가 없습니다" 메시지가 표시되어야 함
And "프로젝트 등록" CTA 버튼이 표시되어야 함
And CTA 버튼으로 포커스가 이동해야 함
```

### Scenario: 서브메뉴 전환
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
When 사용자가 "영상 피드백" 메뉴를 클릭
Then "프로젝트 관리" 서브메뉴가 닫혀야 함
And "영상 피드백" 서브메뉴가 열려야 함
And 전환 애니메이션이 부드럽게 실행되어야 함
And 포커스가 새 서브메뉴의 첫 항목으로 이동해야 함
```

## Feature: 서브메뉴 닫기 패턴

### Scenario: ESC 키로 닫기
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
And 두 번째 프로젝트 항목에 포커스가 있음
When 사용자가 ESC 키를 누름
Then 서브메뉴가 닫혀야 함
And 포커스가 "프로젝트 관리" 메뉴 버튼으로 돌아가야 함
And 스크린 리더가 "서브메뉴 닫힘"을 알려야 함
```

### Scenario: 닫기 버튼 클릭
```gherkin
Given "영상 기획" 서브메뉴가 열려있음
When 사용자가 서브메뉴 헤더의 X 버튼을 클릭
Then 서브메뉴가 닫혀야 함
And "영상 기획" 메뉴 버튼의 활성 상태가 해제되어야 함
```

### Scenario: 외부 영역 클릭 (태블릿/모바일)
```gherkin
Given 태블릿 뷰포트 (768px)에서 서브메뉴가 열려있음
And 반투명 오버레이가 표시되어 있음
When 사용자가 오버레이 영역을 클릭
Then 서브메뉴가 닫혀야 함
And 오버레이가 사라져야 함
```

### Scenario: 같은 메뉴 재클릭으로 토글
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
When 사용자가 "프로젝트 관리" 메뉴를 다시 클릭
Then 서브메뉴가 닫혀야 함
And "프로젝트 관리" 메뉴의 활성 상태가 유지되어야 함
```

## Feature: 키보드 네비게이션

### Scenario: 화살표 키로 항목 이동
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
And 5개의 프로젝트가 있음
And 첫 번째 항목에 포커스가 있음
When 사용자가 ArrowDown 키를 누름
Then 두 번째 항목으로 포커스가 이동해야 함
When 사용자가 ArrowDown 키를 4번 더 누름
Then 다시 첫 번째 항목으로 포커스가 순환해야 함
When 사용자가 ArrowUp 키를 누름
Then 마지막 항목으로 포커스가 이동해야 함
```

### Scenario: Home/End 키 사용
```gherkin
Given "영상 기획" 서브메뉴가 열려있음
And 중간 항목에 포커스가 있음
When 사용자가 Home 키를 누름
Then 첫 번째 항목으로 포커스가 이동해야 함
When 사용자가 End 키를 누름
Then 마지막 항목으로 포커스가 이동해야 함
```

### Scenario: Tab 키로 포커스 트랩
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
And 마지막 포커스 가능 요소에 포커스가 있음
When 사용자가 Tab 키를 누름
Then 포커스가 서브메뉴 내 첫 번째 요소로 순환해야 함
When 사용자가 Shift+Tab 키를 누름
Then 포커스가 마지막 요소로 역순환해야 함
```

### Scenario: Enter 키로 항목 선택
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
And "프로젝트 A" 항목에 포커스가 있음
When 사용자가 Enter 키를 누름
Then "/projects/project-a" 페이지로 이동해야 함
And 서브메뉴가 닫혀야 함
```

## Feature: 모바일 인터랙션

### Scenario: 모바일 바텀 시트 열기
```gherkin
Given 모바일 디바이스 (375px 너비)에서 앱을 사용 중
And 햄버거 메뉴를 통해 사이드바가 열려있음
When 사용자가 "영상 피드백" 메뉴를 탭
Then 서브메뉴가 화면 하단에서 슬라이드업 되어야 함
And 서브메뉴 높이가 화면의 70%를 차지해야 함
And 상단에 드래그 핸들이 표시되어야 함
And 배경에 반투명 오버레이가 표시되어야 함
```

### Scenario: 스와이프 다운으로 닫기
```gherkin
Given 모바일에서 서브메뉴가 바텀 시트로 열려있음
When 사용자가 서브메뉴를 아래로 50px 이상 스와이프
Then 서브메뉴가 아래로 슬라이드되며 닫혀야 함
And 오버레이가 페이드아웃 되어야 함
```

### Scenario: 부분 스와이프 후 복귀
```gherkin
Given 모바일에서 서브메뉴가 열려있음
When 사용자가 서브메뉴를 아래로 30px만 스와이프
And 손가락을 뗌
Then 서브메뉴가 원래 위치로 스프링백 되어야 함
And 서브메뉴가 계속 열려있어야 함
```

### Scenario: 스크롤 가능한 콘텐츠
```gherkin
Given 모바일에서 서브메뉴가 열려있음
And 20개의 프로젝트가 있어 스크롤이 필요함
When 사용자가 콘텐츠 영역을 위로 스와이프
Then 프로젝트 목록이 스크롤되어야 함
And 헤더는 고정되어 있어야 함
```

## Feature: 프로젝트 추가 플로우

### Scenario: 프로젝트 추가 버튼 클릭
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
And 프로젝트가 1개 이상 있음
When 사용자가 헤더의 "+" 버튼을 클릭
Then "/projects/create" 페이지로 이동해야 함
And 서브메뉴가 닫혀야 함
```

### Scenario: 빈 상태에서 프로젝트 추가
```gherkin
Given "프로젝트 관리" 서브메뉴가 열려있음
And 등록된 프로젝트가 없음
When 사용자가 "프로젝트 등록" CTA 버튼을 클릭
Then "/projects/create" 페이지로 이동해야 함
And 서브메뉴가 닫혀야 함
```

## Feature: 영상 기획 서브메뉴

### Scenario: AI 기획 시작
```gherkin
Given "영상 기획" 서브메뉴가 열려있음
When 사용자가 "AI 기획" 항목을 클릭
Then "/video-planning/ai" 페이지로 이동해야 함
And "AI 기획" 항목이 활성 상태로 표시되어야 함
```

### Scenario: 기획서 관리 접근
```gherkin
Given "영상 기획" 서브메뉴가 열려있음
When 사용자가 "기획서 관리" 항목을 클릭
Then "/video-planning/history" 페이지로 이동해야 함
And 이전 기획서 목록이 표시되어야 함
```

## Feature: 접근성 요구사항

### Scenario: 스크린 리더 안내
```gherkin
Given 스크린 리더를 사용하는 사용자
When "프로젝트 관리" 메뉴에 포커스가 있을 때
Then 스크린 리더가 "프로젝트 관리, 버튼, 3개 프로젝트"를 읽어야 함
When 서브메뉴가 열릴 때
Then "프로젝트 관리 서브메뉴 열림, 3개 항목, ESC 키로 닫기 가능"을 알려야 함
```

### Scenario: 고대비 모드
```gherkin
Given 시스템이 고대비 모드로 설정됨
When 서브메뉴가 표시될 때
Then 모든 텍스트가 4.5:1 이상의 대비율을 가져야 함
And 포커스 인디케이터가 명확하게 보여야 함
And 활성 상태가 색상 외 다른 방법으로도 구분되어야 함
```

### Scenario: 키보드 전용 사용
```gherkin
Given 마우스를 사용할 수 없는 사용자
When Tab 키만으로 네비게이션할 때
Then 모든 인터랙티브 요소에 접근 가능해야 함
And 포커스 순서가 논리적이어야 함
And 현재 포커스 위치가 명확하게 표시되어야 함
```

## Feature: 성능 요구사항

### Scenario: 초기 렌더링 성능
```gherkin
Given 네트워크 속도가 3G
When 사용자가 서브메뉴를 처음 열 때
Then 300ms 이내에 서브메뉴 프레임이 표시되어야 함
And 500ms 이내에 콘텐츠가 표시되어야 함
And 레이아웃 시프트(CLS)가 0.1 미만이어야 함
```

### Scenario: 애니메이션 성능
```gherkin
Given 일반적인 모바일 디바이스
When 서브메뉴 열기/닫기 애니메이션이 실행될 때
Then 60fps를 유지해야 함
And 자연스러운 이징 커브를 사용해야 함
And GPU 가속이 활성화되어야 함
```

### Scenario: 대량 데이터 처리
```gherkin
Given 100개의 프로젝트가 등록되어 있음
When "프로젝트 관리" 서브메뉴를 열 때
Then 가상 스크롤이 적용되어야 함
And 초기에 보이는 10개 항목만 렌더링되어야 함
And 스크롤 시 추가 항목이 동적으로 로드되어야 함
```

## Feature: 에러 처리

### Scenario: 네트워크 오류
```gherkin
Given 네트워크 연결이 불안정함
When 서브메뉴 데이터 로드 중 오류 발생
Then "일시적인 오류가 발생했습니다" 메시지가 표시되어야 함
And "다시 시도" 버튼이 제공되어야 함
And 3초 후 자동으로 재시도되어야 함
```

### Scenario: 권한 오류
```gherkin
Given 사용자에게 특정 프로젝트 접근 권한이 없음
When 해당 프로젝트를 클릭할 때
Then "접근 권한이 없습니다" 토스트가 표시되어야 함
And 항목이 비활성화 상태로 표시되어야 함
```

## 테스트 실행 매트릭스

| 시나리오 | Chrome | Firefox | Safari | Edge | Mobile Chrome | Mobile Safari |
|---------|--------|---------|--------|------|---------------|---------------|
| 기본 동작 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 키보드 네비게이션 | ✓ | ✓ | ✓ | ✓ | N/A | N/A |
| 모바일 인터랙션 | N/A | N/A | N/A | N/A | ✓ | ✓ |
| 접근성 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |
| 성능 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |

## 자동화 우선순위

### Critical (P0) - 즉시 자동화
- 서브메뉴 열기/닫기
- ESC 키로 닫기
- 키보드 네비게이션
- 모바일 바텀 시트

### High (P1) - 1주 내 자동화
- 서브메뉴 전환
- 포커스 관리
- 빈 상태 처리
- 프로젝트 추가 플로우

### Medium (P2) - 2주 내 자동화
- 스와이프 제스처
- 스크린 리더 호환성
- 대량 데이터 처리
- 에러 처리

### Low (P3) - 필요시 자동화
- 애니메이션 성능
- 고대비 모드
- 네트워크 오류 재시도