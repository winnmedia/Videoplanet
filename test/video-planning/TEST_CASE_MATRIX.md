# 영상 기획 기능 테스트 케이스 매트릭스

## 📊 테스트 범위 및 전략

### 테스트 대상 기능
- **AI 영상 기획 생성**: 한 줄 스토리 입력 → 4단계 스토리 + 12개 숏트 생성
- **다양한 전개방식**: 6가지 전개방식별 결과 검증
- **메타데이터 설정**: 장르, 타겟, 길이, 템포, 톤앤매너 등

### 테스트 레벨
- **Unit Tests** (60%): 개별 함수 및 컴포넌트 로직
- **Integration Tests** (30%): API 통신 및 상태 관리
- **E2E Tests** (10%): 전체 사용자 플로우

## 🎯 테스트 케이스 매트릭스

### 1. 입력 검증 테스트 (Input Validation)

| 테스트 ID | 필드 | 테스트 케이스 | 입력값 | 예상 결과 | 우선순위 |
|-----------|------|--------------|---------|-----------|----------|
| IV-01 | title | 최소 길이 미만 | "A" (1자) | 오류: 최소 2자 이상 | P0 |
| IV-02 | title | 최소 길이 경계 | "AI" (2자) | 성공 | P0 |
| IV-03 | title | 일반적인 입력 | "브이래닛 홍보영상" | 성공 | P0 |
| IV-04 | title | 최대 길이 경계 | 100자 문자열 | 성공 | P1 |
| IV-05 | title | 최대 길이 초과 | 101자 문자열 | 오류: 최대 100자 | P1 |
| IV-06 | title | 특수문자 포함 | "AI@#$%영상" | 성공 (정제 필요) | P2 |
| IV-07 | title | 이모지 포함 | "🎬 AI 영상 🎥" | 성공 | P2 |
| IV-08 | title | 빈 값 | "" | 오류: 필수 입력 | P0 |
| IV-09 | title | null/undefined | null | 오류: 필수 입력 | P0 |
| IV-10 | oneLinerStory | 최소 길이 미만 | "짧은스토리" (5자) | 오류: 최소 10자 | P0 |
| IV-11 | oneLinerStory | 최소 길이 경계 | 10자 문자열 | 성공 | P0 |
| IV-12 | oneLinerStory | 일반적인 입력 | "AI 기술로 영상 제작 과정을 혁신하는 브이래닛의 이야기" | 성공 | P0 |
| IV-13 | oneLinerStory | 최대 길이 경계 | 500자 문자열 | 성공 | P1 |
| IV-14 | oneLinerStory | 최대 길이 초과 | 501자 문자열 | 오류: 최대 500자 | P1 |
| IV-15 | oneLinerStory | 멀티라인 입력 | "첫 줄\\n둘째 줄" | 성공 (정제) | P2 |

### 2. 전개방식별 결과 검증 (Development Method Verification)

| 테스트 ID | 전개방식 | 테스트 시나리오 | 검증 항목 | 우선순위 |
|-----------|---------|-----------------|-----------|----------|
| DM-01 | hook-immersion-twist-clue | 훅 전개방식 적용 | 도입부에 강력한 훅 포함 확인 | P0 |
| DM-02 | classic-kishōtenketsu | 기승전결 구조 | 4단계 비율 검증 (20-40-30-10) | P0 |
| DM-03 | induction | 귀납적 전개 | 구체적 사례 → 일반화 패턴 | P1 |
| DM-04 | deduction | 연역적 전개 | 일반 원칙 → 구체적 적용 | P1 |
| DM-05 | documentary | 다큐멘터리 스타일 | 사실 중심, 객관적 서술 | P1 |
| DM-06 | pixar-story | 픽사 스토리텔링 | "Once upon a time..." 구조 | P2 |

### 3. 전개 강도별 검증 (Development Intensity)

| 테스트 ID | 강도 설정 | 테스트 항목 | 검증 기준 | 우선순위 |
|-----------|----------|------------|-----------|----------|
| DI-01 | as-is | 원본 유지 | 입력 스토리 그대로 유지 | P0 |
| DI-02 | moderate | 적당한 발전 | 디테일 추가 (150-200%) | P0 |
| DI-03 | rich | 풍부한 발전 | 상세 전개 (200-300%) | P0 |

### 4. 템포별 숏트 분배 검증 (Tempo-based Shot Distribution)

| 테스트 ID | 템포 | 총 길이 | 숏트당 평균 시간 | 검증 기준 | 우선순위 |
|-----------|------|---------|------------------|-----------|----------|
| TP-01 | fast | 60초 | 5초 | 빠른 전환, 역동적 | P0 |
| TP-02 | normal | 60초 | 5초 | 균형잡힌 템포 | P0 |
| TP-03 | slow | 60초 | 5초 | 여유로운 전개 | P0 |
| TP-04 | fast | 30초 | 2.5초 | 초단편 빠른 전개 | P1 |
| TP-05 | slow | 180초 | 15초 | 장편 느린 전개 | P1 |

### 5. 장르별 톤앤매너 검증 (Genre & Tone Verification)

| 테스트 ID | 장르 | 톤앤매너 | 검증 항목 | 우선순위 |
|-----------|------|----------|-----------|----------|
| GT-01 | 홍보영상 | 친근한 | 긍정적, 접근성 높은 언어 | P0 |
| GT-02 | 다큐멘터리 | 진지한 | 객관적, 사실 중심 | P0 |
| GT-03 | 광고 | 유쾌한 | 밝고 경쾌한 톤 | P1 |
| GT-04 | 교육영상 | 전문적 | 정확한 정보 전달 | P1 |
| GT-05 | 브랜드필름 | 감성적 | 감정적 연결 강조 | P2 |

### 6. 4단계 스토리 구조 검증 (Story Structure Validation)

| 테스트 ID | 검증 항목 | 테스트 내용 | 성공 기준 | 우선순위 |
|-----------|----------|------------|-----------|----------|
| SS-01 | 도입부 생성 | 도입부 존재 및 구조 | title, description, duration, keyPoints 포함 | P0 |
| SS-02 | 전개부 생성 | 전개부 내용 검증 | 전체의 40% 차지, 핵심 내용 포함 | P0 |
| SS-03 | 절정부 생성 | 절정부 임팩트 | 전체의 30% 차지, 클라이맥스 포함 | P0 |
| SS-04 | 결말부 생성 | 결말부 마무리 | 전체의 10% 차지, 정리 및 CTA | P0 |
| SS-05 | 시간 분배 | 총 시간 일치 | 4단계 합 = 총 영상 길이 | P0 |

### 7. 12개 숏트 분해 검증 (Shot Breakdown Validation)

| 테스트 ID | 검증 항목 | 테스트 내용 | 성공 기준 | 우선순위 |
|-----------|----------|------------|-----------|----------|
| SB-01 | 숏트 개수 | 정확히 12개 생성 | shotBreakdown.length === 12 | P0 |
| SB-02 | 숏트 번호 | 순차적 번호 | 1-12 연속 번호 | P0 |
| SB-03 | 스토리 매핑 | 단계별 분배 | 도입(2-3), 전개(4-5), 절정(3-4), 결말(1-2) | P0 |
| SB-04 | 필수 속성 | 모든 속성 포함 | shotType, cameraMovement, composition 등 | P0 |
| SB-05 | 시간 합계 | 총 시간 일치 | Σ(shot.duration) = 총 영상 길이 | P0 |

### 8. 에러 처리 및 복구 (Error Handling & Recovery)

| 테스트 ID | 시나리오 | 테스트 방법 | 예상 동작 | 우선순위 |
|-----------|---------|------------|-----------|----------|
| EH-01 | API 타임아웃 | 30초 지연 | 타임아웃 에러, 재시도 옵션 | P0 |
| EH-02 | 네트워크 오류 | 연결 차단 | 오프라인 메시지, 재시도 | P0 |
| EH-03 | 서버 오류 (500) | 500 응답 | 에러 메시지, 지원 연락처 | P0 |
| EH-04 | 잘못된 응답 | 깨진 JSON | 파싱 에러 처리 | P1 |
| EH-05 | 부분 실패 | 일부 필드 누락 | 기본값으로 대체 | P2 |

### 9. 성능 테스트 (Performance Testing)

| 테스트 ID | 테스트 항목 | 측정 지표 | 성공 기준 | 우선순위 |
|-----------|------------|----------|-----------|----------|
| PT-01 | 응답 시간 | P95 | < 10초 | P0 |
| PT-02 | 동시 요청 | 10개 동시 | 모두 성공 | P1 |
| PT-03 | 메모리 사용 | 피크 메모리 | < 200MB | P2 |
| PT-04 | CPU 사용률 | 평균 CPU | < 70% | P2 |

### 10. 사용자 플로우 E2E (End-to-End User Flow)

| 테스트 ID | 시나리오 | 단계 | 검증 항목 | 우선순위 |
|-----------|---------|------|-----------|----------|
| E2E-01 | 기본 플로우 | 입력→생성→결과 | 전체 프로세스 성공 | P0 |
| E2E-02 | 수정 플로우 | 입력→수정→재생성 | 수정사항 반영 | P1 |
| E2E-03 | 저장 플로우 | 생성→저장→불러오기 | 데이터 영속성 | P1 |
| E2E-04 | 공유 플로우 | 생성→공유→접근 | 공유 링크 작동 | P2 |
| E2E-05 | 다운로드 플로우 | 생성→다운로드 | PDF/JSON 내보내기 | P2 |

## 📋 테스트 실행 계획

### Phase 1: 핵심 기능 테스트 (Week 1)
- [ ] 입력 검증 테스트 (IV-01 ~ IV-15)
- [ ] 기본 전개방식 테스트 (DM-01 ~ DM-02)
- [ ] 4단계 구조 검증 (SS-01 ~ SS-05)
- [ ] 12개 숏트 검증 (SB-01 ~ SB-05)

### Phase 2: 고급 기능 테스트 (Week 2)
- [ ] 모든 전개방식 테스트 (DM-03 ~ DM-06)
- [ ] 전개 강도 테스트 (DI-01 ~ DI-03)
- [ ] 템포별 테스트 (TP-01 ~ TP-05)
- [ ] 장르별 테스트 (GT-01 ~ GT-05)

### Phase 3: 안정성 테스트 (Week 3)
- [ ] 에러 처리 테스트 (EH-01 ~ EH-05)
- [ ] 성능 테스트 (PT-01 ~ PT-04)
- [ ] 동시성 테스트

### Phase 4: 통합 테스트 (Week 4)
- [ ] E2E 테스트 (E2E-01 ~ E2E-05)
- [ ] 회귀 테스트
- [ ] 최종 검증

## 🎯 성공 지표

| 지표 | 목표 | 현재 | 달성률 |
|------|------|------|--------|
| 테스트 케이스 작성 | 75개 | 0개 | 0% |
| 테스트 자동화 | 90% | 0% | 0% |
| 코드 커버리지 | 85% | 0% | 0% |
| 결함 발견율 | >80% | - | - |
| 테스트 실행 시간 | <5분 | - | - |

## 🔧 테스트 도구 및 환경

### 단위 테스트
- **Framework**: Vitest
- **Assertion**: expect, vi
- **Mocking**: vi.mock(), vi.fn()

### 통합 테스트
- **API Testing**: MSW (Mock Service Worker)
- **State Testing**: Redux Test Utils

### E2E 테스트
- **Framework**: Playwright
- **Browser**: Chrome, Firefox, Safari
- **Device**: Desktop, Mobile

### 성능 테스트
- **Load Testing**: K6
- **Monitoring**: Lighthouse CI

## 📝 테스트 코드 위치

```
test/
├── video-planning/
│   ├── unit/
│   │   ├── input-validation.test.ts
│   │   ├── story-structure.test.ts
│   │   └── shot-breakdown.test.ts
│   ├── integration/
│   │   ├── api-integration.test.ts
│   │   └── state-management.test.ts
│   ├── e2e/
│   │   ├── user-flow.spec.ts
│   │   └── error-recovery.spec.ts
│   └── performance/
│       ├── load-test.js
│       └── stress-test.js
```

## ✅ 체크리스트

### 테스트 작성 전
- [ ] 요구사항 명확히 이해
- [ ] 테스트 케이스 리뷰
- [ ] 테스트 데이터 준비

### 테스트 작성 중
- [ ] AAA 패턴 적용 (Arrange-Act-Assert)
- [ ] 독립적인 테스트 작성
- [ ] 명확한 테스트 이름

### 테스트 작성 후
- [ ] 코드 리뷰
- [ ] CI/CD 통합
- [ ] 문서화 업데이트

---

**마지막 업데이트**: 2025-08-23
**담당자**: QA Team
**버전**: 1.0.0