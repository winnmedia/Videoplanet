# VideoPlanet API í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

VideoPlanet í”„ë¡œì íŠ¸ì˜ ë°±ì—”ë“œ APIì— ëŒ€í•œ ì¢…í•©ì ì¸ í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ì…ë‹ˆë‹¤.

## ğŸ—ï¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°

```
test/api/
â”œâ”€â”€ types/              # í…ŒìŠ¤íŠ¸ íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ api-test.types.ts
â”œâ”€â”€ helpers/            # í…ŒìŠ¤íŠ¸ í—¬í¼ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ test-helpers.ts
â”œâ”€â”€ unit/               # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ ai-generate-plan.test.ts
â”‚   â””â”€â”€ plans-crud.test.ts
â”œâ”€â”€ performance/        # ì„±ëŠ¥ ë° ë¶€í•˜ í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ concurrency-load.test.ts
â”œâ”€â”€ integration/        # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ e2e-workflow.test.ts
â””â”€â”€ run-api-tests.ts    # í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì „ì œ ì¡°ê±´

1. ê°œë°œ ì„œë²„ ì‹¤í–‰:
```bash
npm run dev
```

2. ëª¨ë“  API í…ŒìŠ¤íŠ¸ ì‹¤í–‰:
```bash
npm run test:api:all
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ëª…ë ¹ì–´

### ì „ì²´ í…ŒìŠ¤íŠ¸
```bash
# ëª¨ë“  API í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:api

# ì¢…í•© í…ŒìŠ¤íŠ¸ ë° ë¦¬í¬íŠ¸ ìƒì„±
npm run test:api:all

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
npm run test:api:coverage
```

### ê°œë³„ í…ŒìŠ¤íŠ¸
```bash
# AI ê¸°íš ìƒì„± API í…ŒìŠ¤íŠ¸
npm run test:api:ai

# CRUD API í…ŒìŠ¤íŠ¸
npm run test:api:crud

# ë™ì‹œì„± í…ŒìŠ¤íŠ¸
npm run test:api:concurrent

# E2E ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
npm run test:api:e2e
```

### ì¹´í…Œê³ ë¦¬ë³„ í…ŒìŠ¤íŠ¸
```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ
npm run test:api:unit

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ
npm run test:api:integration

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ë§Œ
npm run test:api:performance
```

### ê°œë°œ ëª¨ë“œ
```bash
# Watch ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:api:watch
```

## ğŸ“ˆ í…ŒìŠ¤íŠ¸ ë²”ìœ„

### 1. AI ê¸°íš ìƒì„± API (`/api/ai/generate-plan`)

#### ì •ìƒ ì¼€ì´ìŠ¤
- âœ… ìœ íš¨í•œ í•œ ì¤„ ìŠ¤í† ë¦¬ ì…ë ¥
- âœ… 4ë‹¨ê³„ ìŠ¤í† ë¦¬ êµ¬ì¡° ìƒì„±
- âœ… 12ê°œ ìˆíŠ¸ ë¶„í•´ ìƒì„±

#### ê²½ê³„ê°’ í…ŒìŠ¤íŠ¸
- âœ… ìµœì†Œ/ìµœëŒ€ ì œëª© ê¸¸ì´ (1-200ì)
- âœ… ìµœì†Œ/ìµœëŒ€ ì˜ìƒ ê¸¸ì´ (10-600ì´ˆ)

#### ì´ìƒ ì¼€ì´ìŠ¤
- âœ… íŠ¹ìˆ˜ë¬¸ì ì²˜ë¦¬
- âœ… ì´ëª¨ì§€ ì²˜ë¦¬
- âœ… ë‹¤êµ­ì–´ ì…ë ¥ (í•œê¸€, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´)

#### ì—ëŸ¬ ì¼€ì´ìŠ¤
- âœ… ë¹ˆ ê°’ ì…ë ¥
- âœ… null/undefined ì²˜ë¦¬
- âœ… ìŒìˆ˜ ì˜ìƒ ê¸¸ì´
- âœ… ë²”ìœ„ ì´ˆê³¼ ê°’

### 2. ê¸°íšì„œ CRUD API (`/api/plans`)

#### CREATE (POST)
- âœ… ê¸°íšì„œ ìƒì„±
- âœ… í•„ìˆ˜ í•„ë“œ ê²€ì¦
- âœ… ì œëª© ê¸¸ì´ ì œí•œ
- âœ… ê¸°íšì„œ ìœ í˜• ê²€ì¦

#### READ (GET)
- âœ… ì „ì²´ ëª©ë¡ ì¡°íšŒ
- âœ… ê°œë³„ ê¸°íšì„œ ì¡°íšŒ
- âœ… í˜ì´ì§€ë„¤ì´ì…˜
- âœ… í•„í„°ë§ (ìƒíƒœ, íƒœê·¸, ê²€ìƒ‰)
- âœ… ì •ë ¬ ê¸°ëŠ¥

#### UPDATE (PUT/PATCH)
- âœ… ë©”íƒ€ë°ì´í„° ìˆ˜ì •
- âœ… ì½˜í…ì¸  ë¶€ë¶„ ìˆ˜ì •
- âœ… ìƒíƒœ ë³€ê²½
- âœ… í¸ì§‘ ì´ë ¥ ì¶”ì 

#### DELETE
- âœ… ê¸°íšì„œ ì‚­ì œ
- âœ… ê²Œì‹œëœ ê¸°íšì„œ ì‚­ì œ ë°©ì§€
- âœ… ê¶Œí•œ ê²€ì¦

### 3. ë™ì‹œì„± í…ŒìŠ¤íŠ¸

- âœ… ë™ì‹œ ìš”ì²­ 10ê°œ ì²˜ë¦¬
- âœ… ì ì§„ì  ë¶€í•˜ ì¦ê°€ (Ramp-up)
- âœ… ë ˆì´ìŠ¤ ì»¨ë””ì…˜ ì²´í¬
- âœ… ì½ê¸°/ì“°ê¸° ë™ì‹œ ì‘ì—…
- âœ… ë™ì‹œ ì‚­ì œ ë°©ì§€

### 4. ë¶€í•˜ í…ŒìŠ¤íŠ¸

- âœ… 1ë¶„ê°„ ì§€ì†ì  ë¶€í•˜ (10 RPS)
- âœ… ìŠ¤íŒŒì´í¬ ë¶€í•˜ í…ŒìŠ¤íŠ¸
- âœ… ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í…ŒìŠ¤íŠ¸
- âœ… API ì—”ë“œí¬ì¸íŠ¸ë³„ ë²¤ì¹˜ë§ˆí¬

### 5. í†µí•© í…ŒìŠ¤íŠ¸

- âœ… ì™„ì „í•œ ì˜ìƒ ê¸°íš ì›Œí¬í”Œë¡œìš°
- âœ… í˜‘ì—… ì›Œí¬í”Œë¡œìš°
- âœ… ì˜¤ë¥˜ ë³µêµ¬ ì›Œí¬í”Œë¡œìš°

## ğŸ¯ ì„±ëŠ¥ ê¸°ì¤€

### ì‘ë‹µ ì‹œê°„
- AI ê¸°íš ìƒì„±: P95 < 10ì´ˆ
- ê¸°íšì„œ CRUD: P95 < 2ì´ˆ
- ì „ì²´ ì›Œí¬í”Œë¡œìš°: < 15ì´ˆ

### ì„±ê³µë¥ 
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: 100%
- ë™ì‹œì„± í…ŒìŠ¤íŠ¸: > 80%
- ë¶€í•˜ í…ŒìŠ¤íŠ¸: > 95%

### ì²˜ë¦¬ëŸ‰
- ê¸°íšì„œ ì¡°íšŒ: > 50 req/s
- ê¸°íšì„œ ìƒì„±: > 10 req/s
- AI ê¸°íš ìƒì„±: > 1 req/s

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„

í…ŒìŠ¤íŠ¸ ì‹¤í–‰ í›„ `test-results/` ë””ë ‰í† ë¦¬ì— ìƒì„¸ ë¦¬í¬íŠ¸ê°€ ìƒì„±ë©ë‹ˆë‹¤:

```
test-results/
â””â”€â”€ api-test-report-[timestamp].md
```

ë¦¬í¬íŠ¸ ë‚´ìš©:
- í…ŒìŠ¤íŠ¸ ìš”ì•½
- ê° í…ŒìŠ¤íŠ¸ ìŠ¤ìœ„íŠ¸ë³„ ê²°ê³¼
- ì„±ëŠ¥ ë©”íŠ¸ë¦­
- ê¶Œì¥ ê°œì„ ì‚¬í•­

## ğŸ” ë””ë²„ê¹…

### ìƒì„¸ ë¡œê·¸ í™•ì¸
```bash
# Vitest UIë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:api:ui
```

### íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
```bash
# íŠ¹ì • í…ŒìŠ¤íŠ¸ íŒŒì¼
npx vitest test/api/unit/ai-generate-plan.test.ts

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
npx vitest test/api/unit/ai-generate-plan.test.ts -t "ìœ íš¨í•œ í•œ ì¤„ ìŠ¤í† ë¦¬"
```

## ğŸ“ í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### ìƒˆ í…ŒìŠ¤íŠ¸ ì¶”ê°€í•˜ê¸°

1. ì ì ˆí•œ ë””ë ‰í† ë¦¬ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±:
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: `test/api/unit/`
   - í†µí•© í…ŒìŠ¤íŠ¸: `test/api/integration/`
   - ì„±ëŠ¥ í…ŒìŠ¤íŠ¸: `test/api/performance/`

2. í…ŒìŠ¤íŠ¸ í—¬í¼ í™œìš©:
```typescript
import { APITestClient, TestDataFactory } from '../helpers/test-helpers'

const apiClient = new APITestClient()
const testData = TestDataFactory.generateAIPlanRequest()
```

3. í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±:
```typescript
describe('API í…ŒìŠ¤íŠ¸', () => {
  it('í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤', async () => {
    const { data, metrics } = await apiClient.post('/api/endpoint', testData)
    
    expect(data.success).toBe(true)
    expect(metrics.responseTime).toBeLessThan(1000)
  })
})
```

## ğŸš¨ CI/CD í†µí•©

GitHub Actionsë‚˜ ë‹¤ë¥¸ CI ë„êµ¬ì—ì„œ ì‚¬ìš©:

```yaml
- name: API í…ŒìŠ¤íŠ¸ ì‹¤í–‰
  run: |
    npm run dev &
    sleep 5
    npm run test:api:all
```

## ğŸ“ ë¬¸ì˜

í…ŒìŠ¤íŠ¸ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­:
- Backend Lead: Benjamin
- í”„ë¡œì íŠ¸: VideoPlanet

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-08-23*