(()=>{var e={};e.id=988,e.ids=[988],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7298:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>o,routeModule:()=>u,tree:()=>d}),t(1912),t(5866),t(1506);var i=t(3191),r=t(8716),a=t(7922),l=t.n(a),n=t(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d=["",{children:["(main)",{children:["projects",{children:["[id]",{children:["edit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1912)),"C:\\Users\\유석근PD\\Desktop\\developments\\Videoplanet\\app\\(main)\\projects\\[id]\\edit\\page.tsx"]}]},{}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"C:\\Users\\유석근PD\\Desktop\\developments\\Videoplanet\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\유석근PD\\Desktop\\developments\\Videoplanet\\app\\(main)\\projects\\[id]\\edit\\page.tsx"],p="/(main)/projects/[id]/edit/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(main)/projects/[id]/edit/page",pathname:"/projects/[id]/edit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},1777:(e,s,t)=>{Promise.resolve().then(t.bind(t,5531))},5531:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var i=t(326);t(7577);var r=t(5047),a=t(9543),l=t(1439),n=t(3077),c=t(6803),d=t(6467),o=t(3568),p=t(2006);function m(){let e=(0,r.useRouter)(),s=(0,r.useParams)(),t=s?.id,{sample_files:m}=(0,a.v9)(e=>e.ProjectStore),{currentProject:u,loading:x,fetchProject:h,deleteProject:j,updateMemberRating:b,deleteFile:N}=(0,o.Z0)(),v=(0,o.ti)(u),{inputs:f,process:g,validation:_,isSubmitting:y,onChange:q,setProcess:P,handleSubmit:w}=(0,o.b5)(u),{files:C,onFileChange:k,onFileDelete:D}=(0,o.FL)(),$=async(e,s)=>{let i=e.target.value;try{await b(t,s,i)}catch(e){}},F=async(e,s)=>{if(window.confirm(`'${s}' 파일을 삭제하시겠습니까?`))try{await N(e)}catch(e){}},Z=async e=>{if(e.preventDefault(),!_.isValid){l.Am.error("모든 필수 항목을 입력해주세요.");return}try{await w("update",t)}catch(e){}},V=async()=>{try{await j(t)}catch(e){}},A=(e,s)=>{p.qx.downloadFile(e,s)};return x||!u?i.jsx(n.Z,{leftItems:[],auth:!1,props:{},noLogin:!1,children:(0,i.jsxs)("div",{className:"cms_wrap",children:[i.jsx(c.Z,{tab:"projects",on_menu:!1}),i.jsx("main",{className:"project edit",children:(0,i.jsxs)("div",{className:"loading-spinner",children:[i.jsx("div",{className:"spinner"}),i.jsx("p",{children:"프로젝트를 불러오는 중..."})]})})]})}):v.canEdit?i.jsx(n.Z,{leftItems:[],auth:!1,props:{},noLogin:!1,children:(0,i.jsxs)("div",{className:"cms_wrap",children:[i.jsx(c.Z,{tab:"projects",on_menu:!1}),(0,i.jsxs)("main",{className:"project edit",children:[i.jsx("div",{className:"title",children:"프로젝트 편집"}),(0,i.jsxs)("form",{onSubmit:Z,className:"content",children:[i.jsx("div",{className:"group grid",children:i.jsx(d.$b,{inputs:f,onChange:q,errors:_.errors,disabled:y})}),(0,i.jsxs)("div",{className:"group grid mt50",children:[(0,i.jsxs)("div",{className:"part",children:[i.jsx("div",{className:"s_title",children:"멤버 초대"}),i.jsx(d.b3,{project_id:t,set_current_project:e=>{e&&h(t)},pending_list:u.pending_list,disabled:y})]}),(0,i.jsxs)("div",{className:"part authority",children:[i.jsx("div",{className:"s_title",children:"멤버 관리"}),i.jsx("ul",{children:u.member_list.map(e=>(0,i.jsxs)("li",{className:"flex align_center space_between",children:[(0,i.jsxs)("span",{className:"member-info",children:[i.jsx("strong",{children:e.nickname}),(0,i.jsxs)("span",{className:"email",children:["(",e.email,")"]})]}),(0,i.jsxs)("select",{onChange:s=>$(s,e.id),name:"rating",value:e.rating,disabled:y,"aria-label":`${e.nickname} 권한 변경`,children:[i.jsx("option",{value:"manager",children:"관리자"}),i.jsx("option",{value:"normal",children:"일반"})]})]},e.id))})]})]}),i.jsx("div",{className:"group mt50",children:(0,i.jsxs)("div",{className:"part day",children:[i.jsx("div",{className:"s_title",children:"프로젝트 일정"}),i.jsx(d.fx,{process:g,set_process:P,disabled:y})]})}),(0,i.jsxs)("div",{className:"group grid mt50",children:[(0,i.jsxs)("div",{className:"part file",children:[i.jsx("div",{className:"s_title",children:"문서 양식"}),i.jsx("ul",{className:"sample",children:0===m.length?i.jsx("li",{className:"no-files",children:"등록된 샘플 파일이 없습니다."}):i.jsx("li",{children:m.map(e=>{let s=p.qx.extractFileName(e.file_name);return i.jsx("button",{type:"button",onClick:()=>A(e.files,s),className:"sample-file","aria-label":`${s} 샘플 파일 다운로드`,children:s},e.id)})})})]}),(0,i.jsxs)("div",{className:"part file",children:[i.jsx("div",{className:"s_title",children:"파일 등록"}),(0,i.jsxs)("ul",{className:"sample",children:[u.files.map(e=>{let s=p.qx.extractFileName(e.file_name);return(0,i.jsxs)("li",{className:"existing-file",children:[i.jsx("button",{type:"button",onClick:()=>p.qx.downloadFile(e.files,s),className:"file-download",children:s}),i.jsx("button",{type:"button",onClick:()=>F(e.id,s),disabled:y,className:"delete-btn","aria-label":`${s} 파일 삭제`,children:"삭제"})]},e.id)}),C.map((e,s)=>(0,i.jsxs)("li",{className:"new-file",children:[i.jsx("span",{className:"file-name",children:e.name}),(0,i.jsxs)("span",{className:"file-size",children:["(",(e.size/1024/1024).toFixed(2),"MB)"]}),i.jsx("button",{type:"button",onClick:()=>D(s),disabled:y,className:"delete-btn","aria-label":`${e.name} 파일 삭제`,children:"삭제"})]},`new-${s}`)),(0,i.jsxs)("li",{className:"upload_button",children:[i.jsx("label",{htmlFor:"file",className:"file-upload-label",children:i.jsx("div",{className:"btn-upload",children:"파일 업로드"})}),i.jsx("input",{type:"file",name:"file",id:"file",onChange:k,disabled:y,multiple:!0,accept:".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.zip,.rar","aria-label":"파일 선택"})]})]})]})]}),(0,i.jsxs)("div",{className:"btn_wrap",children:[i.jsx("button",{type:"submit",className:"submit",disabled:y||!_.isValid,children:y?"수정 중...":"수정"}),i.jsx("button",{type:"button",onClick:V,className:"submit del",disabled:y,children:"삭제"}),i.jsx("button",{type:"button",onClick:()=>{e.push(`/projects/${t}/view`)},className:"submit cancel",disabled:y,children:"취소"})]})]})]})]})}):i.jsx(n.Z,{leftItems:[],auth:!1,props:{},noLogin:!1,children:(0,i.jsxs)("div",{className:"cms_wrap",children:[i.jsx(c.Z,{tab:"projects",on_menu:!1}),i.jsx("main",{className:"project edit",children:(0,i.jsxs)("div",{className:"error-message",children:[i.jsx("h2",{children:"접근 권한이 없습니다"}),i.jsx("p",{children:"이 프로젝트를 편집할 권한이 없습니다."}),i.jsx("button",{onClick:()=>e.push("/Calendar"),className:"submit",children:"프로젝트 목록으로 돌아가기"})]})})]})})}},1912:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});let i=(0,t(8570).createProxy)(String.raw`C:\Users\유석근PD\Desktop\developments\Videoplanet\app\(main)\projects\[id]\edit\page.tsx#default`)}};var s=require("../../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),i=s.X(0,[787,84,70,226,597,293,852,467],()=>t(7298));module.exports=i})();