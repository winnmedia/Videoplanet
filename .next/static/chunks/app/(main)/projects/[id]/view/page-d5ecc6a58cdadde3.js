(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{23309:function(e,s,t){Promise.resolve().then(t.bind(t,63292))},63292:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(57437),n=t(2265),l=t(99376),i=t(32603),c=t(4848),r=t(16323),d=t(80589),h=t(6265),o=t(19558),u=t(76524),j=t(81374);function x(){let e=(0,l.useRouter)(),s=(0,l.useParams)(),t=null==s?void 0:s.id,{user:x}=(0,i.v9)(e=>e.ProjectStore),{currentProject:m,loading:p,fetchProject:f}=(0,j.Z0)(),_=(0,j.ti)(m),[N,w]=(0,n.useState)("월"),[D,g]=(0,n.useState)(new Date().getDate()-1),[v,y]=(0,n.useState)(new Date().getMonth()),[b,k]=(0,n.useState)(new Date().getFullYear()),[E,S]=(0,n.useState)(0),[Z,A]=(0,n.useState)([]),C=async()=>{t&&await f(t)},P=e=>{let s;let t=new Date(b,v,0).getDate(),a=new Date(b,v,0).getDay(),n=new Date(b,v+1,0).getDay(),l=new Date(b,v+1,0).getDate(),i=[];if(6!==a){let e=v-1,s=b;e<0&&(s--,e=11);for(let n=0;n<a+1;n++)i.unshift(new Date(s,e,t-n))}let c=[],r=v+1,d=b;r>11&&(d++,r=0);for(let e=1;e<7-n&&0!==e;e++)c.push(new Date(d,r,e));let h=[];for(let e=1;e<l+1;e++)h.push(new Date(b,v,e));if("일"===e)return A(s=h),s;{let e=[...i,...h,...c],t=[];for(let s=0;s<e.length;s+=7){let a=e.slice(s,s+7);t.push(a)}return A(s=t),s}},I=()=>{e.push("/projects/".concat(t,"/edit"))};return((0,n.useEffect)(()=>{t&&f(t).catch(()=>{e.push("/Calendar")})},[t]),(0,n.useEffect)(()=>{P(N)},[b,v,N]),p||!m)?(0,a.jsx)(r.Z,{leftItems:[],auth:!1,props:{},noLogin:!1,children:(0,a.jsxs)("div",{className:"cms_wrap",children:[(0,a.jsx)(d.Z,{tab:"projects",on_menu:!1}),(0,a.jsx)("main",{className:"project",children:(0,a.jsxs)("div",{className:"loading-spinner",children:[(0,a.jsx)("div",{className:"spinner"}),(0,a.jsx)("p",{children:"프로젝트를 불러오는 중..."})]})})]})}):(0,a.jsx)(r.Z,{leftItems:[],auth:!1,props:{},noLogin:!1,children:(0,a.jsxs)("div",{className:"cms_wrap",children:[(0,a.jsx)(d.Z,{tab:"projects",on_menu:!1}),(0,a.jsxs)("main",{className:"project",children:[(0,a.jsx)(u.vz,{current_project:m,isAdmin:_.isAdmin,..._.canEdit&&{onEdit:I}}),(0,a.jsxs)("div",{className:"content calendar",children:[(0,a.jsxs)("div",{className:"filter flex space_between align_center",children:[(0,a.jsx)(h.Z,{totalDate:Z,year:b,month:v,setMonth:y,setYear:k,week_index:E,set_week_index:S,type:N,changeDate:P,day:D,setDay:g}),(0,a.jsxs)("div",{className:"type flex align_center",children:[(0,a.jsx)(c.default,{defaultValue:N,style:{width:140},value:N,onChange:e=>{w(e),P(e)},options:["월","주","일"].map(e=>({label:e,value:e}))}),_.isAdmin&&(0,a.jsx)("button",{onClick:I,className:"submit",type:"button",children:"프로젝트 관리"})]})]}),Z.length>0&&(0,a.jsx)(o.Z,{totalDate:Z,month:v,year:b,week_index:E,type:N,day:D,current_project:m,project_list:[m],user_memos:[],is_admin:_.isAdmin,refetch:C}),(0,a.jsx)("div",{className:"list_mark",children:(0,a.jsxs)("ul",{children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"first"}),"기초기획안 작성"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"second"}),"스토리보드 작성"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"third"}),"촬영 (계획/진행)"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"fourth"}),"비디오 편집"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"fifth"}),"후반 작업"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"sixth"}),"비디오 시사 (피드백)"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"seven"}),"최종 컨펌"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("span",{className:"eighth"}),"영상 납품"]})]})}),(0,a.jsx)(u.l2,{project_list:[m],showAllPhases:!0})]})]})]})})}}},function(e){e.O(0,[711,83,990,500,41,919,145,565,991,848,114,985,524,9,971,117,744],function(){return e(e.s=23309)}),_N_E=e.O()}]);