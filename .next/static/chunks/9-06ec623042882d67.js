(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9],{19558:function(e,t,a){"use strict";a.d(t,{Z:function(){return v}});var s=a(57437),n=a(2265);a(77398),a(43819);var r=a(86631),o=a(53638),l=a(25566),d=a(99163),i=a(36760),c=a.n(i),m=a(85994),u=a.n(m);a(21005),a(58279);var _=a(99379),h=a(89991);function p(e){let{ModalTitle:t,ModalText:a,visible:n}=e;return(0,s.jsxs)(h.Z,{footer:!1,centered:!0,open:!!n&&n,closable:!1,children:[t,a]})}function x(e){let{index:t,week:a,month:n,year:r,type:o,day:l,current_project:d,project_list:i,user_memos:c,is_admin:m,refetch:u}=e,_=["일","월","화","수","목","금","토"];return(0,s.jsxs)(s.Fragment,{children:[0===t&&(0,s.jsx)("div",{className:"th",children:"일"!=o?(0,s.jsx)(s.Fragment,{children:_.map((e,t)=>(0,s.jsx)("div",{className:0===t||6===t?"holiday":"",children:e},t))}):(0,s.jsx)("div",{className:0===l.getDay()||6===l.getDay()?"holiday":"",children:_[l.getDay()]})}),"월"===o&&(0,s.jsx)("div",{className:"td",children:(0,s.jsx)("div",{className:"week",children:a.map((e,t)=>(0,s.jsx)(j,{current_project:d,day:e,year:r,month:n,project_list:i,user_memos:c,is_admin:m,refetch:u},t))})},t),"주"===o&&(0,s.jsx)("div",{className:"td",children:(0,s.jsx)("div",{className:"week",children:a.map((e,t)=>(0,s.jsx)(j,{current_project:d,day:e,year:r,month:n,project_list:i,user_memos:c,is_admin:m,refetch:u},t))})}),"일"===o&&(0,s.jsx)("div",{className:"td",children:(0,s.jsx)("div",{className:"week",children:(0,s.jsx)(j,{current_project:d,day:l,month:n,year:r,project_list:i,user_memos:c,is_admin:m,refetch:u})})})]})}function j(e){let{day:t,month:a,year:i,current_project:m,project_list:h,user_memos:x,is_admin:j,refetch:v}=e;function w(e){return new Date(e).setHours(0,0,0,0)}function y(e){return e==t.setHours(0,0,0,0)}let g=(0,d.s0)(),[f,N]=(0,n.useState)(!1),{project_id:M}=(0,d.UO)(),k=new Date(t).getDate(),[b,C]=(0,n.useState)(""),D=f&&(0,s.jsx)(p,{visible:!0,ModalTitle:(0,s.jsx)(s.Fragment,{}),ModalText:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"day",children:[i,"년 ",a+1,"월 ",k,"일"]}),(0,s.jsx)("textarea",{className:"mt20",name:"textarea",placeholder:"메모를 입력해주세요.",cols:"30",rows:"10",value:b,onChange:e=>C(e.target.value)}),(0,s.jsxs)("div",{className:"btn_wrap",children:[(0,s.jsx)("button",{className:"submit",onClick:()=>{if(b.length>0){if(j)(0,r.$s)({date:"".concat(i,"-").concat(a+1,"-").concat(k),memo:b},M).then(e=>{C(""),v(),N(!1)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)});else if(window.location.pathname.includes("/Calendar")){var e;(e={date:"".concat(i,"-").concat(a+1,"-").concat(k),memo:b},(0,o.Fi)("post","".concat(l.env.REACT_APP_BACKEND_API_URL,"/users/memo"),e)).then(e=>{C(""),v(),N(!1)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})}}else window.alert("메모를 작성해주세요.")},children:"등록"}),(0,s.jsx)("button",{className:"cancel",onClick:()=>N(!1),children:"닫기"})]})]})}),[F,T]=(0,n.useState)(null),A=F&&(0,s.jsx)(p,{ModalTitle:(0,s.jsx)(s.Fragment,{}),ModalText:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"memo_txt",children:F.memo}),(0,s.jsxs)("div",{className:"btn_wrap",children:[(j||window.location.pathname.includes("/Calendar"))&&(0,s.jsx)("button",{className:"submit",onClick:()=>{if(j)(0,r.E0)({memo_id:F.id},M).then(e=>{v(),T(null)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)});else if(window.location.pathname.includes("/Calendar")){var e;(e=F.id,(0,o.Fi)("delete","".concat(l.env.REACT_APP_BACKEND_API_URL,"/users/memo/").concat(e))).then(e=>{v(),T(null)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)})}},children:"삭제"}),(0,s.jsx)("button",{onClick:()=>T(null),className:"cancel",children:"닫기"})]})]}),visible:!0}),[H,L]=(0,n.useState)(null),O=e=>{let t=new Date;return e>=t||e.toDateString()===t.toDateString()},S=H&&(0,s.jsx)(p,{ModalTitle:(0,s.jsx)(s.Fragment,{}),ModalText:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"selec_wrap",children:[(0,s.jsx)("div",{className:"select",children:(0,s.jsx)(u(),{placeholderText:"시작 날짜",selected:H.start_date?new Date(H.start_date):null,onChange:e=>L({...H,start_date:e}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"yyyy-MM-dd HH:mm",filterDate:O})}),(0,s.jsx)("div",{className:"select",children:(0,s.jsx)(u(),{placeholderText:"종료 날짜",filterDate:e=>new Date(H.start_date).setHours(0,0,0,0)<=new Date(e)&&O(e),filterTime:e=>new Date(H.start_date)<new Date(e),selected:H.end_date?new Date(H.end_date):null,onChange:e=>L({...H,end_date:e}),showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:10,dateFormat:"yyyy-MM-dd HH:mm",disabled:!H.start_date})})]}),(0,s.jsxs)("div",{className:"btn_wrap",children:[(0,s.jsx)("button",{className:"submit",onClick:()=>{console.log(H),H.start_date&&H.end_date&&new Date(H.start_date)<new Date(H.end_date)?(0,r.CH)(H,M).then(e=>{v(),L(null)}).catch(e=>{e.response&&e.response.data&&window.alert(e.response.data.message)}):window.alert("날짜를 입력해주세요.")},children:"변경하기"}),(0,s.jsx)("button",{className:"cancel",onClick:()=>L(null),children:"닫기"})]})]}),visible:!0}),[E,P]=(0,n.useState)(null),I=t.getMonth()==new Date().getMonth()&&t.getFullYear()==new Date().getFullYear()&&t.getDate()==new Date().getDate();return _.ZP.span.withConfig({componentId:"sc-93477f40-0"})(["&:hover::before{content:'","';color:black;opacity:0.3;font-size:12px;position:absolute;}"],e=>e.content?e.content:""),(0,n.createElement)("div",{...function(){let e=0==t.getDay()||6==t.getDay();return{style:{opacity:t.getMonth()<a||t.getFullYear()<i||t.getMonth()>a||t.getFullYear()>i?"0.3":"1",color:e?"red":"#000"}}}(),key:t,children:[D,A,S,(0,s.jsx)("p",{style:{cursor:j||window.location.pathname.includes("/Calendar")?"pointer":"auto"},onClick:()=>{(j||window.location.pathname.includes("/Calendar"))&&N(!0)},children:I?(0,s.jsx)("div",{className:"today",children:t.getDate()}):t.getDate()}),m&&(0,s.jsxs)(s.Fragment,{children:[w(m.basic_plan.start_date)<=t&&t<=w(m.basic_plan.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.basic_plan)},onMouseOver:e=>P("기초기획안 작성"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("first",{start:y(w(m.basic_plan.start_date)),end:y(w(m.basic_plan.end_date))})}),"기초기획안 작성"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.story_board.start_date)<=t&&t<=w(m.story_board.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.story_board)},onMouseOver:e=>P("스토리보드 작성"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("second",{start:y(w(m.story_board.start_date)),end:y(w(m.story_board.end_date))})}),"스토리보드 작성"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.filming.start_date)<=t&&t<=w(m.filming.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.filming)},onMouseOver:e=>P("촬영(계획/진행)"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("third",{start:y(w(m.filming.start_date)),end:y(w(m.filming.end_date))})}),"촬영(계획/진행)"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.video_edit.start_date)<=t&&t<=w(m.video_edit.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.video_edit)},onMouseOver:e=>P("비디오 편집"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("fourth",{start:y(w(m.video_edit.start_date)),end:y(w(m.video_edit.end_date))})}),"비디오 편집"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.post_work.start_date)<=t&&t<=w(m.post_work.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.post_work)},onMouseOver:e=>P("후반 작업"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("fifth",{start:y(w(m.post_work.start_date)),end:y(w(m.post_work.end_date))})}),"후반 작업"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.video_preview.start_date)<=t&&t<=w(m.video_preview.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.video_preview)},onMouseOver:e=>P("비디오 시사"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("sixth",{start:y(w(m.video_preview.start_date)),end:y(w(m.video_preview.end_date))})}),"비디오 시사"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.confirmation.start_date)<=t&&t<=w(m.confirmation.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.confirmation)},onMouseOver:e=>P("최종 컨펌"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("seven",{start:y(w(m.confirmation.start_date)),end:y(w(m.confirmation.end_date))})}),"최종 컨펌"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),w(m.video_delivery.start_date)<=t&&t<=w(m.video_delivery.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onClick:()=>{j&&L(m.video_delivery)},onMouseOver:e=>P("영상 납품"),onMouseLeave:e=>P(null),style:{cursor:j?"pointer":"auto"},className:c()("eighth",{start:y(w(m.video_delivery.start_date)),end:y(w(m.video_delivery.end_date))})}),"영상 납품"==E&&(0,s.jsx)("div",{className:"Modal",children:E})]}):(0,s.jsx)("span",{}),m.memo.map((e,a)=>{if(w(e.date)==w(t))return(0,s.jsx)("span",{className:"memo",onClick:()=>T(e),style:{color:"#23262d",cursor:"pointer"},children:e.memo},a)})]}),h&&h.map((e,a)=>w(e.first_date)<=t&&t<=w(e.end_date)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{onMouseOver:e=>P(a),onMouseLeave:e=>P(null),onClick:()=>g("/ProjectView/".concat(e.id)),className:c()({start:y(w(e.first_date)),end:y(w(e.end_date))}),style:{background:e.color,cursor:"pointer"}},a),E==a&&(0,s.jsx)("div",{className:"Modal",children:e.name})]}):(0,s.jsx)("span",{},a)),x&&x.map((e,a)=>{if(w(e.date)==w(t))return(0,s.jsx)("span",{className:"memo",onClick:()=>T(e),style:{color:"#23262d",cursor:"pointer"},children:e.memo},a)})]})}function v(e){let{totalDate:t,month:a,year:n,type:r,week_index:o,day:l,current_project:d,project_list:i,user_memos:c,is_admin:m,refetch:u}=e;return(0,s.jsxs)("div",{className:"일"===r?"caldendar_box day":"caldendar_box",children:["월"===r&&t.map((e,t)=>Array.isArray(e)&&(0,s.jsx)(x,{index:t,week:e,month:a,year:n,type:r,current_project:d,project_list:i,user_memos:c,is_admin:m,refetch:u},t)),"주"===r&&Array.isArray(t[o])&&(0,s.jsx)(x,{index:0,week:t[o],month:a,year:n,type:r,current_project:d,project_list:i,user_memos:c,is_admin:m,refetch:u}),"일"===r&&t[l]&&(0,s.jsx)(x,{index:0,month:a,year:n,type:r,day:t[l],current_project:d,project_list:i,user_memos:c,is_admin:m,refetch:u})]})}},6265:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});var s=a(57437),n=a(2265);function r(e){let{totalDate:t,year:a,month:r,setMonth:o,setYear:l,week_index:d,set_week_index:i,type:c,changeDate:m,day:u,setDay:_}=e,[h,p]=(0,n.useState)("");(0,n.useEffect)(()=>{let e=m(c);"minus"===h?(i(e.length-1),_(e.length-1)):"add"===h&&(i(0),_(0))},[r,a]);let x=r+1;function j(){let e=r-1,t=a;e<0&&(--t,e=11),o(e),t!=a&&l(t)}function v(){let e=r+1,t=a;e>11&&(++t,e=0),o(e),t!=a&&l(t)}return(0,s.jsxs)("div",{className:"date flex space_between align_center",children:[a,".",x<10?"0".concat(x):x,(0,s.jsxs)("div",{className:"move",children:[(0,s.jsx)("span",{onClick:()=>{p("minus"),"월"===c?j():"주"===c?0===d?j():i(d-1):0===u?j():_(u-1)},className:"prev"}),(0,s.jsx)("span",{onClick:()=>{p("add"),"월"===c?v():"주"===c?d===t.length-1?v():i(d+1):u===t.length-1?v():_(u+1)},className:"next"})]})]})}},58279:function(){}}]);